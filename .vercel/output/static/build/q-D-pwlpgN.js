import{u,a as w,q as s,o as x,I as E,r as j,C as V,j as C,k as v,l as m,_hW as c}from"./q-DY-apSyG.js";import{_ as r}from"./q-CSnWScGr.js";import{c as k,u as T}from"./q-CBy2b3bG.js";const R=async(n,t)=>{const[e,o,a]=u(),i=n.target;e.inputValueSig.value=i.value,a.value=!1,i.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,o&&(o.value=t.value,e.inputValueSig.value=t.value),e.mode!=="inline"&&(e.highlightedIndexSig.value=null)},D=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_a0VzjnNavWQ:R},Symbol.toStringTag,{value:"Module"})),L=()=>{const[n]=u();if(!n.isListboxOpenSig.value&&n.mode==="popover")return"";const t=n.highlightedIndexSig.value;if(t===null||t===-1)return"";const e=n.itemsMapSig.value.get(t);return!e||e.disabled?"":`${n.localId}-${t}`},K=Object.freeze(Object.defineProperty({__proto__:null,s_Cw90lRLHnYM:L},Symbol.toStringTag,{value:"Module"})),H=()=>{const[n,t]=u();return(n==null?void 0:n.value)??t.value??""},U=Object.freeze(Object.defineProperty({__proto__:null,s_uu8DWCpa0pk:H},Symbol.toStringTag,{value:"Module"})),z=function(){const[t]=u();t.mode==="inline"&&(t.highlightedIndexSig.value=0)},q=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_jLMrXHMCjKA:z},Symbol.toStringTag,{value:"Module"}));class ie{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(o=>o!==t):[...e,t]}return this.initialValue===t?"":t}}function B(){const n=w(k);return{getNextEnabledItemIndex$:s(()=>r(()=>import("./q-CsVREemN.js").then(i=>i.c),[]),"s_zRvrVnzQa0A",[n]),getPrevEnabledItemIndex$:s(()=>r(()=>import("./q-CsVREemN.js").then(i=>i.u),[]),"s_8R1TgicLaAE",[n]),selectionManager$:s(()=>r(()=>import("./q-CsVREemN.js").then(i=>i.b),[]),"s_X3sksc8UG5U",[n]),filterManager$:s(()=>r(()=>import("./q-CsVREemN.js").then(i=>i.a),[]),"s_L1hokTA6340",[n])}}const oe=({"bind:value":n,...t})=>{const e=w(k),o={context:e,givenContextRef:e.inputRef},a=T(t.ref,o),i=`${e.localId}-panel`,d=`${e.localId}-inline`,_=`${e.localId}-input`,g=`${e.localId}-label`,b=`${e.localId}-description`,p=`${e.localId}-error-mesprimary`,I=x(),f=x(!1),h=x(!1),A=B(),S=E(s(()=>r(()=>Promise.resolve().then(()=>K),void 0),"s_Cw90lRLHnYM",[e])),O=j(l=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(l.key)&&l.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),M=s(()=>r(()=>Promise.resolve().then(()=>F),void 0),"s_67oWqkKCG0g",[A,e,h,f]),P=s(()=>r(()=>Promise.resolve().then(()=>D),void 0),"s_a0VzjnNavWQ",[e,n,h]),$=s(()=>r(()=>Promise.resolve().then(()=>G),void 0),"s_to4Cpc6M0Og",[e,h,f]);V(s(()=>r(()=>Promise.resolve().then(()=>q),void 0),"s_jLMrXHMCjKA",[e])),V(s(()=>r(()=>Promise.resolve().then(()=>W),void 0),"s_VZRQtT2aot8",[e,I]));const y=E(s(()=>r(()=>Promise.resolve().then(()=>U),void 0),"s_uu8DWCpa0pk",[n,I]));return C("input",{role:"combobox",get value(){return y.value},id:_,get"aria-activedescendant"(){return S.value},get"aria-expanded"(){return e.isExpandedSig.value},"aria-controls":e.mode==="inline"?d:i,"aria-labelledby":g,"aria-describedby":`${b} 
        ${p}`,"aria-autocomplete":"list",get"aria-haspopup"(){return e.mode==="inline"?void 0:"listbox"},ref:a,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[O,M,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?$:void 0,t.onKeyUp$],onInput$:[P,t.onInput$]},{role:m,value:v(l=>l.value,[y]),"aria-activedescendant":v(l=>l.value,[S]),"aria-expanded":v(l=>l.isExpandedSig.value,[e]),"aria-autocomplete":m,"aria-haspopup":v(l=>l.mode==="inline"?void 0:"listbox",[e]),autocomplete:m,"data-combobox-input":m,"data-invalid":v(l=>l.isInvalidSig.value?"":void 0,[e])},0,"dk_0")},N=function(){const[t,e]=u(),{selectedValuesSig:o,multiple:a,itemsMapSig:i,highlightedIndexSig:d}=t,_=o.value,g=[];for(const[b,p]of i.value.entries())if((a?Array.isArray(_)&&_.includes(p.value):p.value===_)&&(g.push(p.displayValue),d.value=b,!a))break;e.value=a?g:g[0]||""},W=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_VZRQtT2aot8:N},Symbol.toStringTag,{value:"Module"})),Q=async n=>{const[t]=u();if(t.mode==="inline"||t.isListboxOpenSig.value){const e=t.highlightedIndexSig.value??-1;t.highlightedIndexSig.value=await n(e)}else t.isListboxOpenSig.value=!0},X=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_Z0XCAwKTMeU:Q},Symbol.toStringTag,{value:"Module"})),Z=n=>{const[t,e,o]=u();if(n.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((o.value||e.value)&&t.inputValueSig.value.length===0){const a=[...t.selectedValuesSig.value];a.pop(),t.selectedValuesSig.value=a}}},G=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_to4Cpc6M0Og:Z},Symbol.toStringTag,{value:"Module"})),Y=async n=>{const[t,e,o,a]=u();if(!e.itemsMapSig.value)return;e.isKeyboardFocusSig.value=!0,n.key==="Backspace"&&(a.value=e.inputValueSig.value.length===0);const i=s(()=>r(()=>Promise.resolve().then(()=>X),void 0),"s_Z0XCAwKTMeU",[e]);switch(n.key){case"ArrowDown":await i(t.getNextEnabledItemIndex$);break;case"ArrowUp":await i(t.getPrevEnabledItemIndex$);break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const d=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=d}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value&&e.mode!=="inline"||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))return;if(!e.multiple){if(e.mode==="inline")return;e.isListboxOpenSig.value=!1;return}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",o.value=!0);break}if(e.highlightedIndexSig.value===null){n.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):n.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}},F=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_67oWqkKCG0g:Y},Symbol.toStringTag,{value:"Module"}));export{ie as V,c as _hW,Y as s_67oWqkKCG0g,L as s_Cw90lRLHnYM,oe as s_RYcpEhxKK8s,N as s_VZRQtT2aot8,Q as s_Z0XCAwKTMeU,R as s_a0VzjnNavWQ,z as s_jLMrXHMCjKA,Z as s_to4Cpc6M0Og,H as s_uu8DWCpa0pk,B as u};
